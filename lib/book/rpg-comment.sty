% Green comment box definition
\newtcolorbox{rpg-commentbox}[2][]{
	frame hidden,
	boxrule=0pt,
	breakable,
	enhanced,
	before skip=5pt plus 1pt,
	toptitle=3mm,
	boxsep=0.25ex,
	left=8pt,
	right=8pt,
	arc=0mm,
	fonttitle=\fontfamily{fosj}\selectfont\scshape\bfseries\color{black},
	fontupper=\fontfamily{lmss}\selectfont,
	title=#2,
	parbox = false,
	colback=commentgreen,
	colframe=commentgreen,
	colbacktitle=commentgreen,
	after={\vspace{5pt plus 1pt}\noindent},
	#1
}

\newtcolorbox{rpg-pcbox}[3][]{
	frame hidden,
	boxrule=0pt,
	breakable,
	enhanced,
	before skip=5pt plus 1pt,
	toptitle=3mm,
	boxsep=0.25ex,
	left=8pt,
	right=8pt,
	bottom=15pt,
	arc=0mm,
	fonttitle=\fontfamily{fosj}\selectfont\scshape\bfseries\color{black},
	fontupper=\fontfamily{lmss}\selectfont,
	title=#2,
	parbox = false,
	colback=commentgreen,
	colframe=commentgreen,
	colbacktitle=commentgreen,
	after={\vspace{5pt plus 1pt}\noindent},
	arc=4pt,
	outer arc=4pt,
	leftupper=3.5cm,
	overlay={
    \node[anchor=north west] 
      at ([xshift=10pt,yshift=-1.65\baselineskip]frame.north west)
       {\includegraphics[width=2.5cm,height=2.5cm]{#3}};},
	#1
}

\newtcolorbox{rpg-warnbox}[2][]{
	frame hidden,
	boxrule=0pt,
	breakable,
	enhanced,
	before skip=5pt plus 1pt,
	toptitle=3mm,
	boxsep=0.25ex,
	left=8pt,
	right=8pt,
	arc=0mm,
	fonttitle=\fontfamily{fosj}\selectfont\scshape\bfseries\color{black},
	fontupper=\fontfamily{lmss}\selectfont,
	title=#2,
	parbox = false,
	colback=commentred,
	colframe=commentred,
	colbacktitle=commentred,
	after={\vspace{5pt plus 1pt}\noindent},
	#1
}

\newtcolorbox{rpg-titlebox}[2][]{
    title=#2,
    left=1mm,
	right=1mm,
    enhanced,
    attach boxed title to top center={yshift=-0.25mm-\tcboxedtitleheight/2,yshifttext=2mm-\tcboxedtitleheight/2},
    boxed title style={
        boxrule=0.5mm,
        frame code={
            \path[tcb fill frame] ([xshift=-4mm]frame.west)
            -- (frame.north west) -- (frame.north east) -- ([xshift=4mm]frame.east)
            -- (frame.south east) -- (frame.south west) -- cycle;
        },
        interior code={
            \path[tcb fill interior] ([xshift=-2mm]interior.west)
            -- (interior.north west) -- (interior.north east)
            -- ([xshift=2mm]interior.east) -- (interior.south east) -- (interior.south west)
            -- cycle;
        }
    },
    #1
}

\newcommand{\rpgsmall}[1][]{
    \color{lightgrey}{\footnotesize{#1}}}

\newcommand{\rpgsmallbox}[1][]{
    \tcbox[nobeforeafter,box align=base,size=fbox,height=0.6cm]{
        \ifthenelse{\isempty{#1}}{\hspace{0.5cm}}%empty
        {\rpgsmall{#1}}% not empty
    }
}




%
% Old implementation using mdframed
%
%\newenvironment{commentbox}[1]
%{\fontfamily{lmss}\selectfont\begin{mdframed}[frametitle={#1},
%                                          frametitlefont=\fontfamily{fosj}\selectfont\scshape\bfseries\color{black},
%                                              linecolor=commentgreen,
%                                              backgroundcolor=commentgreen]}
%{\end{mdframed}}
